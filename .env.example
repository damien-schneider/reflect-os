# Copy to `.env` (never commit `.env`). Secrets: `openssl rand -base64 32`

# =============================================================================
# DATABASE (Required)
# =============================================================================
# PostgreSQL connection string - development uses Docker on port 5430
ZERO_UPSTREAM_DB="postgresql://user:password@127.0.0.1:5430/postgres"
ZERO_REPLICA_FILE="/tmp/reflect_zero_replica.db"
ZERO_LOG_LEVEL="debug" # debug|info|warn|error

# =============================================================================
# AUTHENTICATION (Required)
# =============================================================================
# Auth secrets (32+ chars recommended in production)
BETTER_AUTH_SECRET="GENERATE_32+_CHARS_FOR_PRODUCTION"
BETTER_AUTH_URL="http://localhost:5173"

# Zero 0.25: Cookie-based authentication (recommended)
# Forward cookies from zero-cache to query/mutate endpoints for session auth
ZERO_QUERY_FORWARD_COOKIES="true"
ZERO_MUTATE_FORWARD_COOKIES="true"

# Zero custom endpoints - where zero-cache forwards mutations and queries
# These MUST be set for custom mutators to work
ZERO_MUTATE_URL="http://localhost:3001/api/zero/mutate"
ZERO_QUERY_URL="http://localhost:3001/api/zero/query"

# DEPRECATED: ZERO_AUTH_SECRET (JWT-based auth)
# This is deprecated in Zero 0.25. Use cookie-based auth instead.
# Only needed for legacy deployments.
# ZERO_AUTH_SECRET="GENERATE_32+_CHARS_FOR_PRODUCTION"

# =============================================================================
# FRONTEND
# =============================================================================
VITE_PUBLIC_ZERO_SERVER="http://localhost:4848"
INTERNAL_API_URL="http://localhost:3001"

# =============================================================================
# EMAIL (Optional - RESEND)
# If not configured, email features are disabled:
# - Users won't need to verify their email (auto-verified on signup)
# - Password reset will log URLs to console instead of sending emails
# - Organization invitations will log URLs to console instead of sending emails
# =============================================================================
# Resend API key - get from https://resend.com
# Leave empty to disable email features entirely
RESEND_API_KEY=""
EMAIL_FROM_ADDRESS="onboarding@resend.dev"
EMAIL_FROM_NAME="Reflet"

# =============================================================================
# BILLING (Optional - POLAR)
# If not configured, billing features are disabled:
# - No subscription management
# - No checkout functionality
# - App works in "free tier only" mode
# =============================================================================
POLAR_ENVIRONMENT="sandbox" # sandbox|production
POLAR_ACCESS_TOKEN=""
POLAR_WEBHOOK_SECRET=""

# =============================================================================
# DEVELOPMENT FLAGS (Optional)
# =============================================================================
# Require email verification for signups (requires RESEND_API_KEY to be set)
# Defaults to "false" when email is not configured
VITE_PUBLIC_REQUIRE_EMAIL_VERIFICATION="false"

# =============================================================================
# DRIZZLE GATEWAY (Optional)
# =============================================================================
MASTERPASS="defaultdevpassword"

# =============================================================================
# PRODUCTION ONLY (docker-compose.yaml)
# =============================================================================
# POSTGRES_USER="reflect_user"  # Default: reflect_user (avoid using 'postgres')
# POSTGRES_PASSWORD="CHANGE_ME_STRONG_DB_PASSWORD"
# PUBLIC_URL="https://yourdomain.com"
# ZERO_SERVER_URL="https://zero.yourdomain.com"
# ZERO_ADMIN_PASSWORD="CHANGE_ME_ADMIN_PASSWORD"
# ZERO_NUM_SYNC_WORKERS="2"
